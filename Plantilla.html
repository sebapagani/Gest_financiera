<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sebastián Pagani">

<title>Proyecto</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Plantilla_files/libs/clipboard/clipboard.min.js"></script>
<script src="Plantilla_files/libs/quarto-html/quarto.js"></script>
<script src="Plantilla_files/libs/quarto-html/popper.min.js"></script>
<script src="Plantilla_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Plantilla_files/libs/quarto-html/anchor.min.js"></script>
<link href="Plantilla_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Plantilla_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Plantilla_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Plantilla_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Plantilla_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Proyecto</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Sebastián Pagani </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="descripción-activo-y-contexto-hito-1" class="level2">
<h2 class="anchored" data-anchor-id="descripción-activo-y-contexto-hito-1">Descripción Activo y Contexto (Hito 1)</h2>
<p>Fecha de entrega: Jueves 28 de Septiembre 23:59.</p>
<section id="definición" class="level3">
<h3 class="anchored" data-anchor-id="definición">Definición</h3>
<p>Cencosud shopping es un operador de centros comerciales en latinoamerica, tiene presencia en Chile, Perú, Colombia, perteneciente al consorcio Cencosud. La compañía entro a la bolsa en junio de 2019. Este activo pertenece al IPSA y corresponde al sector inmobiliario&nbsp;</p>
<p>Con respecto a la base de datos Web of Science, la revista Housing catalogoda con Q2 tiene un paper citado 15 veces llamado ” New neoliberal public housing policies: between centrality discourse and peripheralization practices in Santiago, Chile”. Este explica que el enfoque neoliberal al momento de construir viviendas sociales es distinta dependiendo del sector geografico y esto se debe a los distintos discursos ideologicos y practicas socioespaciales.</p>
<p>Otro paper llamado “Neoliberal Lakeside Residentialism: Real Estate Development and the Sustainable Utopia in Environmentally Fragile Areas” de la revista Land, catolgada con un Q2, se trata sobre el rol que tuvo el desarollo inmobiliario neoliberal en la transformación de dos ciudades lacustres en el sur de Chile.</p>
<p>Por ultimo, el paper “Sustainability Attributes in Real Estate Development: Private Perspectives on Advancing Energy Regulation in a Liberalized Market” de la revista Sustainability, catalogada en Q2, tiene 10 citas menciona que los mercados inmobiliarios donde los certificados de eficiencia energética no son obligatorios, como el caso de Santiago de Chile, implementar soluciones para satisfacer la demanda sobre sostentabilidad genera un dilema si estas deben aceptarse como medidas.</p>
<p>Por lo tanto, la literatura menciona que la industria inmobiliaria en Chile tiene un impacto en la calidad de vida de las personas y es crucial que sea sostenible.</p>
<p>A continuación se presenta la evolución del activo desde que empezó a cotizar en bolsa (26 de septiembre de 2019 hasta el 31 de diciembre de 2022)</p>
<p>El activo CENCOSHOPP tiene un valor promedio para el intervalo de tiempo mencionado igual a <code>rround(mean(CENCOSHOPP.SN$close),digits=0)</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">round</span>(<span class="fu">mean</span>(CENCOSHOPP.SN<span class="sc">$</span>close),<span class="at">digits=</span><span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1212</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="Plantilla_files/figure-html/CMPCline-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>CENCOSHOPP.SN <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> close)) <span class="sc">+</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_candlestick</span>(<span class="fu">aes</span>(<span class="at">open =</span> open, <span class="at">high =</span> high, <span class="at">low =</span> low, <span class="at">close =</span> close)) <span class="sc">+</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"CENCOSHOPP_SN Candlestick Chart"</span>, <span class="at">y =</span> <span class="st">"Closing Price"</span>, <span class="at">x =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_tq</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Plantilla_files/figure-html/CMPCcandle-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="motivación" class="level3">
<h3 class="anchored" data-anchor-id="motivación">Motivación</h3>
<p>La motivación detrás de estudiar activos del sector inmobiliario se debe al rol que tiene en la economia y en la sociedad dado que este tiene un impacto en la calidad de vida de las personas y desarollo de la ciudad.</p>
<p>La motivación de estudiar el activo de Cencosud shopping radica en el impacto que tiene dicha empresa en el sector minorista y comercial, siendo esta importante no solo en el sector nacional, si no qué tambien internacional. Al estudiar este activo permite estudiar patrones de consumo.</p>
<p>En Julio de 2023, Cencosud Shopping anuncio un nuevo proyecto que consiste en crear un centro comercial en Vitacura, la inversión estimada es de 120 millones de dolares y se espera que empiece a operar en 2026 (DF, 2023). Por lo tanto, cencosud shopping es una empresa en constante expansión lo cual lo hace interesante de estudiar.</p>
</section>
<section id="contexto" class="level3">
<h3 class="anchored" data-anchor-id="contexto">Contexto</h3>
<p>Los tres activos que podrian tener correlación con CencosudShopping son; Cencosud, esto se debe a que CencosudShopping es una unidad de negocio del consorcio cencosud; El dolar, dado que al operar en diversos paises operan con distintas divisas entonces una fluctuación en el tipo de cambio podría repercutar en los ingresos, tambien el precio del dolar puede afectar en inversiones en el sector inmobiliario. El tercer activo es el valor del petróleo, esto se debe a que este insumo permite fabricar materiales de construcción como lo seria el asfalto, plástico y aislantes. Si el precio del petróleo aumenta, los costos de producción y construcción pueden elevarse, lo que repercuta en los precios y la rentabilidad del sector inmobiliario. Ademas, el petroleo es un elemento crucial para el transporte y logística de los materiales a utilizar.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Plantilla_files/figure-html/context-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Con los gráficos anteriores se muestra que Cencosud y Cencosud Shopping tienen la misma tendencia, con respecto al precio del combustible, este tiende a la baja y las acciones de Cencosud a la alta. Por último, cuando el dólar tiende a la baja, las acciones del Cencosud Shopping aumentan. Sin embargo, con solo los gráficos no se puede asegurar que exista una correlación.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://www.mbi.cl/static/uploads/noticias/doc/bolsa240.pdf"><img src="fotos/Captura%20de%20Pantalla%202023-09-27%20a%20la(s)%2022.38.52.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
<p>Este gráfico obtenido de mbi muestra la evolcuión del rendimiento del IPSA y cencoshopp durante 2021-2022, donde el el retorno del IPSA fue mayor.</p>
</section>
<section id="análisis-de-largo-plazo" class="level3">
<h3 class="anchored" data-anchor-id="análisis-de-largo-plazo">Análisis de Largo Plazo</h3>
<section id="caracterización-deuda-aplicación-cap.-15" class="level4">
<h4 class="anchored" data-anchor-id="caracterización-deuda-aplicación-cap.-15">Caracterización deuda (Aplicación cap. 15)</h4>
<p>Las acciones de Cencoshopp son ordinarias y de solo una serie, por lo tanto, no tienen acciones preferentes. En total tienen 1.705.831.078 acciones, en donde Cencosud S.A tiene el 71,64% de la propiedad (CMF,nd).</p>
<p>CencosudShopping emite los siguientes tipos de bonos Línea N° 940, Series A y C y Línea N° 941, Series B, E (Humphreys,sf). Humphreys cataloga esta empresa con AA+, lo que muestra que es una empresa confiable y si paga sus deudas.</p>
<p>El articulo de Yahoo finance publicado el 27 de abril de 2023 mencionada las siguientes inversiones que planea realizar CencosudShopping en Chile, Colombia y Peru por un monto de 500Millones de dolares.</p>
<p>En Chile, desembolsaran 120 Millones de dolares para construir un mall en Vitacura, que considera incorporar mas de 330000 metros cuadrados arrendables para más de 1000 locales comerciales. El portal de rancagua lo desean ampliar para que hayan 140 tiendas en dos niveles y aumentar el GLA (superficie bruta alquilable) de 43963 metros cuadrados hasta 78000. Por ultimo, el Florida Center desean aumentar el GLA hasta 146000 metros cuadrados.</p>
<p>En Colombia, la inversión que desean llevar a cabo es remodelar y ampliar el Centro Comercial Limonar en Cali, Colombia. Esta inversión consiste en tener 20.000 GLA y agregar una terraza gastronomica.</p>
<p>Por ultimo, en Perú desean construir un nuevo centro comercial en el distrito de La Molina de Lima y otro en San Juan de Lurigancho.</p>
<p>No fue posible encontrar la cartera de inversiones que posee el activo CencosudShopping. Sin embargo, en los estados financieros de Julio 2023, en total los pasivos son de 1.398.768.940M de pesos chilenos y los activos totales para esa fecha son de 4.108.332.197M de CLP.</p>
</section>
<section id="caracterización-de-emisiones-históricas-aplicación-cap.-20" class="level4">
<h4 class="anchored" data-anchor-id="caracterización-de-emisiones-históricas-aplicación-cap.-20">Caracterización de emisiones históricas (Aplicación cap. 20)</h4>
<p>https://www.cmfchile.cl/institucional/mercados/prospectos.php?pro=AC&amp;tipo=COM&amp;or=6&amp;pestania=</p>
<p>Basándose en el “PROSPECTO DE EMISIÓN DE ACCIONES DE PAGO, REGISTRADO BAJO EL NÚMERO 1080 EL 06 DE MAYO DE 2019.” (CMF) la emisión tiene una parte de antecedentes legales, características de la emisión y descripción de la colocación.</p>
<p>Los antecedentes legales consisten en la junta extraordinaria de accionistas y publicación e inscripción de extracto. La junta extraordinaria de accionistas fue acordada el aumento de capital el 8 de enero de 2019, luego el 10 de abril del mismo año se ratificaron y rectificaron los acuerdos acordados previamente. Con respecto a la publicación e inscripción de extracto, fue inscrita en fojas 30379 N° 15252 el 18 de abril de 2019 en el registro de comercio de bienes raíces de Santiago, en el diario financiero la noticia fue publicada el mismo día</p>
<p>Las características de la emisión fueron las siguientes:</p>
<p>1) El monto máximo de la emisión es de $466.816.007.752 CLP.</p>
<p>2) El número total de acciones a emitir son de 547.263.785, siendo todas estas acciones nominativas y ordinarias.</p>
<p>3) Las primeras emisiones de acciones representarán un 30,73%, en relación con el total luego de la colocación.</p>
<p>4) Las acciones no tienen valor nominal.</p>
<p>5) Con respecto al precio de colocación todas las acciones fueron ofrecidas a los accionistas de la junta extraordinaria a un precio de 853 CLP, sin embargo, todos rechazaron la opción de compra por lo que fueron colocadas para accionistas y terceros a un precio acordado por la directiva.</p>
<p>6) Con respecto al plazo de colocación y formas de pago, tienen un plazo de tres años para colocar, suscribir y pagar, este plazo finalizó el 8 de enero de 2022. El pago debe ser en pesos, cheque, vale vista bancario o transferencia bancaria.</p>
<p>7) Los fondos recaudados serán utilizados para pagar parte de la deuda.</p>
<p>Por último, la descripción de la colocación es la siguiente:</p>
<p>1) se incorporaran 547.263.784 nuevas acciones</p>
<p>2) La colocación se realizara con intermediarios, estos son: Banchile, Larrain Vial, JP morgan, BCI</p>
<p>3) El procedimiento de colocación fue mediante el mecanismo denominado Subasta de un Libro de ordenes regulado en el manual de operaciones en acciones de la bolsa de comercio de Santiago. La subasta fue realizada de la siguiente manera I) realizar presentaciones a potenciales inversionistas tanto en chile como el exterior, el directorio acordo un precio entre 1475 y 1700. II) los interesados en adquirir acciones se registraran sus ordenes con los agentes colocadores. III) Los agentes colocadores o corredoras de bolsa involucradas y autorizados incluiran las ordenes en el sistema de subasta. IV) En la fecha de cierre del libro de ordenes, el directorio determinara el precio que seran colocadas las acciones. V) La cantidad de acciones que se le asigen a cada inversionista se determina con los terminos indicados en el manual. Por ultimo, las caracteristicas y plazos de la subasta del libro de ordenes se publican en la forma y plazo establecidos en el manual. En la junta extraordinaria no se acordo ofrecer un porcentaje minimo de colocación</p>
<p>Comparándolo con el procedimiento básico realizado en el capítulo, (este consiste en conferencias previas a la suscripción, presentación y aprobación de la declaración de registros, fijación de precios de la emisión, oferta pública y venta, estabilización en el mercado). Se puede apreciar que los primeros dos pasos corresponden a los aspectos legales mencionados anteriormente, el paso tres corresponde al precio que fue ofrecido a la junta de accionistas y al mercado, los pasos cuatro y cinco tienen ciertas diferencias dado que no se puede desprender del texto de la CMF que compran acciones para luego vender a un precio mayor, y el precio no está especificado sino que en un rango</p>
</section>
<section id="relación-con-activos-derivados" class="level4">
<h4 class="anchored" data-anchor-id="relación-con-activos-derivados">Relación con activos derivados</h4>
<p>Según los estados financieros para el periodo 03/2023 publicado por la CMF, señalan que no han tenido cobros de derivados tanto de contratos mantenidos para intermediación o para negociar con ellos como de arrendamiento y posterior venta de esos activos, tampoco han tenido pagos de de contratos de futuro, a término, de opciones y de permuta financiera.</p>
<p>El activo que podría ser considerado un derivado es el dólar, esto se debe a que la empresa al importar productos probablemente tiene forwards para poder protegerse en caso de que el dólar suba de precio drásticamente. También es posible que utilicen los dólares como swap, dado que ellos al operar en diversos países van a buscar mitigar el riesgo de tipo de cambio. Ademas, con los swaps la empresa puede intercambiar flujos de efectivo en diferentes monedas, lo que le permite estabilizar sus ingresos y gastos en el extranjero.</p>
</section>
</section>
<section id="reporte-grupal" class="level3">
<h3 class="anchored" data-anchor-id="reporte-grupal">Reporte grupal</h3>
<p>El portafolio está conformado por tres activos del Índice de Precios Selectivo de Acciones (IPSA), de tres industrias distintas; eléctrica, bancaria e inmobiliaria. Para las cuales se escogió Enel, Banco Santander Chile y Cencosud, los nemotécnicos de las acciones seleccionadas de cada empresa son ENELCHILE, BSANTANDER y CENCOSHOPP respectivamente. El objetivo del portafolio es de corto plazo, alrededor de tres meses,&nbsp; con una aversión al riesgo moderada-baja, sin embargo, hay que considerar que es un portafolio conformado solamente por renta variable, lo que hace que el portafolio sea más riesgoso y por lo tanto más volátil.&nbsp;</p>
<p>Para poder obtener las ponderaciones del portafolio, se debe realizar un análisis a cada activo por invertir, donde se consideraron los Beta de cada acción y las industrias pertenecientes a cada activo.</p>
<p>Banco Santander está presente en la industria bancaria donde a grandes rasgos las inversiones están asociadas al manejo de carteras adversas al riesgo, al préstamo de créditos y al corretaje de bolsa que genera comisiones. Por lo que en esta industria las rentabilidades son bajas al igual que los riesgos.</p>
<p>Enel Chile es la empresa líder en el sector eléctrico chileno y ha tenido un aumento en activos en el último año. Además, es propietario mayoritario, con el 93% de Enel Generación Chile, 99.09% de Enel distribución Chile y del 100% de Enel Green Power, los cuales también han tenido un incremento en sus activos en el último año. Además, tiene una base de generación de energía diversificada. La empresa tiene un riesgo medio-alto, debido a la industria en la que se encuentra y los desafíos futuros del país.&nbsp;</p>
<p>Cencoshopp, perteneciente al consorcio Cencosud está invirtiendo fuertemente en Latinoamérica construyendo centros comerciales en Chile, Perú y Colombia. Por lo que, las ganancias que obtengan la empresa serán a largo plazo cuando estas operen, entonces se espera que el valor de la acción continúen creciendo moderadamente como ha sido a lo largo del año.</p>
<p>Según las estadísticas de Yahoo Finance los Betas (5y Monthly) de los activos tienen las siguientes cifras; 0.72 ENELCHILE, 0,42 BSANTANDER, 0,64 CENCOSHOPP.</p>
<p>A este portafolio se le invertirá 10 millones de pesos chilenos con las siguientes ponderaciones:</p>
<ul>
<li><p>Cencoshopp 20%</p></li>
<li><p>Enel chile 40%</p></li>
<li><p>Banco Santander 40%</p></li>
</ul>
<p>Este portafolio con aversión al riesgo moderada-baja, se agregó un 40% de ponderación al activo más riesgoso (con mayor beta). Se ponderó un 20% de CENCOSHOPP dado que se espera que no tendrá una profunda volatilidad Además, las mayores ponderaciones son para los activos que han tenido un mayor incremento de precio a lo largo del año, banco santander aproximadamente aumentó el valor de su acción en un 25%, enel un 35% y cencoshopp un 10%, los gráficos sobre la variación se muestran a continuación, donde en general desde el 2022, los precios han ido a la alta.&nbsp;Finalmente se ponderó un 40% de BSANTANDER para poder mitigar el riesgo, debido a que es una industria de bajo riesgo y posee el menor beta, por lo que si el mercado baja, esta no se verá tan afectada.</p>
<p><br>
<img src="fotos/WhatsApp%20Image%202023-09-28%20at%2015.19.41.jpeg" class="img-fluid"><img src="fotos/WhatsApp%20Image%202023-09-28%20at%2015.21.20.jpeg" class="img-fluid"><img src="fotos/WhatsApp%20Image%202023-09-28%20at%2015.22.21.jpeg" class="img-fluid"></p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>